C51 COMPILER V9.60.0.0   MAIN                                                              04/28/2024 20:34:13 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "XPT2046.h"
   3          #include "Nixie.h"
   4          unsigned int ADValue;
   5          
   6          unsigned char count = 0;
   7          unsigned char compared = 2;
   8          
   9          void Timer1_Isr(void) interrupt 3
  10                  
  11          {
  12   1      //      TL1 = 0xFC;                             //设置定时初始值
  13   1      //      TH1 = 0xFC;                             //设置定时重载值
  14   1              count++;
  15   1              if(count >= 10){
  16   2                      count = 0;
  17   2              }
  18   1              if(count < compared){
  19   2                      P2_1 = 1;
  20   2              }
  21   1              else{
  22   2                      P2_1 = 0;
  23   2              }
  24   1      }
  25          
  26          void Timer1_Init(void)          
  27          {
  28   1              TMOD &= 0x0F;                   //设置定时器模式
  29   1              TMOD |= 0x20;                   //设置定时器模式
  30   1              TL1 = 0xFF;                             //设置定时初始值
  31   1              TH1 = 0xFF;                             //设置定时重载值
  32   1              TF1 = 0;                                //清除TF1标志
  33   1              TR1 = 1;                                //定时器1开始计时
  34   1              ET1 = 1;                                //使能定时器1中断
  35   1      
  36   1              EA = 1;
  37   1      }
  38          
  39          
  40          void main(){
  41   1              Timer1_Init();
  42   1              while(1){
  43   2                      
  44   2                              ADValue=XPT2046_ReadAD(XPT2046_AUX);            //读取AIN3，可调电阻
  45   2      //                      Nixie_SetBuf(4,ADValue/1000%10);                                                                     
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
             -                                                                                                                        
C51 COMPILER V9.60.0.0   MAIN                                                              04/28/2024 20:34:13 PAGE 2   

             -                                                                                                                        
             -                                                                                        
  46   2      //                      Nixie_SetBuf(3,ADValue/100%10);
  47   2      //                      Nixie_SetBuf(2,ADValue/10%10);
  48   2      //                      Nixie_SetBuf(1,ADValue%10);
  49   2      //                      Nixie_SetBuf(5,10);
  50   2      //                      Nixie_SetBuf(6,10);
  51   2      //                      Nixie_SetBuf(7,10);
  52   2      //                      Nixie_SetBuf(8,10);
  53   2      
  54   2              }
  55   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     73    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
