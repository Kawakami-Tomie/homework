C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\keil5\KeilC51_V9.60_XiTongZhiJia\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXT
                    -END PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Time.h"
   4          
   5          //定义蜂鸣器
   6          sbit Buzzer = P2^5;
   7          
   8          //播放速度
   9          #define SPEED 100
  10          
  11          //低,重,高音
  12          #define P0  0
  13          #define L1  1
  14          #define L1_ 2
  15          #define L2  3
  16          #define L2_ 4
  17          #define L3  5
  18          #define L4  6
  19          #define L4_ 7
  20          #define L5  8
  21          #define L5_ 9
  22          #define L6  10
  23          #define L6_ 11
  24          #define L7  12
  25          #define M1  13
  26          #define M1_ 14
  27          #define M2  15
  28          #define M2_ 16
  29          #define M3  17
  30          #define M4  18
  31          #define M4_ 19
  32          #define M5  20
  33          #define M5_ 21
  34          #define M6  22
  35          #define M6_ 23
  36          #define M7  24
  37          #define H1  25
  38          #define H1_ 26
  39          #define H2  27
  40          #define H2_ 28
  41          #define H3  29
  42          #define H4  30
  43          #define H4_ 31
  44          #define H5  32
  45          #define H5_ 33
  46          #define H6  34
  47          #define H6_ 35
  48          #define H7  36
  49          
  50          //重载装值
  51          unsigned int FreqTable[]=
  52          {
  53             63628,63731,63835,63928,64021,64103,64185,64260,64331,64400,64463,64528,
  54             64580,64633,64684,64732,64777,64820,64860,64898,64934,64968,65000,65030,
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 2   

  55             65058,65085,65110,65134,65157,65178,65198,65217,65235,65252,65268,65283,
  56          };
  57          
  58          //歌曲音符，节拍
  59          unsigned char code Music[]={
  60            //周杰伦-《告白气球》
  61            //第一行
  62            P0,4,
  63            P0,2,
  64            M5,2,
  65            H1,2,
  66            M7,2,
  67            M5,2,
  68            M1,2,
  69            
  70            M1,4,
  71            M5,2,
  72            M2,4,
  73            M3,2,
  74            M3,2,
  75            
  76            M3,4,
  77            P0,2,
  78            M5,2,
  79            H1,2,
  80            M4,2,
  81            M5,2,
  82            M1,2,
  83            
  84            M1,4,
  85            M5,2,
  86            M2,4,
  87            M3,2,
  88            M4,2,
  89            M3,2,
  90            
  91            //第二行
  92            M3,4,
  93            P0,2,
  94            M5,2,
  95            H2,2,
  96            H1,2,
  97            M7,2,
  98            H1,2,
  99            
 100            H1,4,
 101            H2,2,
 102            H3,4,
 103            H1,2,
 104            H1,2,
 105            M6,2,
 106            
 107            M6,4,
 108            M7,2,
 109            H1,4,
 110            M5,2,
 111            M5,2,
 112            M1,2,
 113            
 114            M5,2,
 115            M4,2,
 116            M3,2,
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 3   

 117            M2,4,
 118            M1,2,
 119            M1,4,
 120            
 121            //第三行
 122            M1,4+2,
 123            L7,2,
 124            L7,4+4,
 125            
 126            P0,1,
 127            H1,1,
 128            H1,1,
 129            M7,1,
 130            H1,2,
 131            P0,1,
 132            M7,1,
 133            H1,1,
 134            M1,1,
 135            H1,2,
 136            P0,2,
 137            H2,1,
 138            H3,1,
 139            
 140            //第四行
 141            P0,1,
 142            M7,1,
 143            M7,1,
 144            M6,1,
 145            M7,2,
 146            P0,1,
 147            M6,1,
 148            M7,1,
 149            M6,1,
 150            M7,2,
 151            P0,2,
 152            H1,2,
 153            
 154            P0,4,
 155            M6,2,
 156            H1,2,
 157            H3,2,
 158            H2,2,
 159            H1,2,
 160            H3,2,
 161            
 162            H3,4+4,
 163            P0,2,
 164            H3,2,
 165            H3,2,
 166            H2,1,
 167            H1,1,
 168            
 169            //第五行
 170            P0,1,
 171            H1,1,
 172            H1,1,
 173            M7,1,
 174            H1,2,
 175            P0,1,
 176            M7,1,
 177            H1,1,
 178            M7,1,
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 4   

 179            H1,2,
 180            P0,2,
 181            H2,2,
 182            H3,2,
 183            
 184            P0,1,
 185            M7,1,
 186            M7,1,
 187            M6,1,
 188            M7,2,
 189            P0,1,
 190            M6,1,
 191            M7,1,
 192            M6,1,
 193            M7,2,
 194            P0,2,
 195            H1,2,
 196            
 197            //第六行
 198            P0,4,
 199            M6,2,
 200            H1,2,
 201            H3,2,
 202            H2,2,
 203            H1,2,
 204            H1,2,
 205            
 206            H1,4+4+4,
 207            M6,2,
 208            M7,2,
 209            
 210            H1,2,
 211            H1,2,
 212            H1,2,
 213            H1,2,
 214            M6,4,
 215            M6,2,
 216            M7,2,
 217            
 218            //第七行
 219            H1,2,
 220            H1,2,
 221            H1,2,
 222            H2,2,
 223            H2,4,
 224            H5,2,
 225            H6,2,
 226            
 227            M7,2,
 228            M7,2,
 229            M7,2,
 230            M7,2,
 231            M5,4,
 232            M5,2,
 233            M6,2,
 234            
 235            M7,2,
 236            M7,2,
 237            M7,2,
 238            H1,2,
 239            H1,2+1,
 240            H1,1,
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 5   

 241            H1,2,
 242            H2,2,
 243            
 244            //第八行
 245            H3,2,
 246            H3,2,
 247            H3,2,
 248            M6,2,
 249            H1,4,
 250            H1,2,
 251            H2,2,
 252            
 253            H3,2,
 254            H3,2,
 255            H6,2,
 256            H3,1,
 257            H2,1,
 258            H1,4,
 259            H1,2,
 260            H2,2,
 261            
 262            H3,2,
 263            H3,2,
 264            H3,2,
 265            H3,4,
 266            H1,2,
 267            H3,2,
 268            H2,2,
 269            
 270            //第九行同节拍1
 271            H2,4+4,
 272            P0,2,
 273            M5,2,
 274            H4,2,
 275            H3,2,
 276            
 277            H3,4,
 278            H4,2,
 279            H3,4,
 280            H2,2,
 281            H2,4,
 282            
 283            H1,4,
 284            H2,2,
 285            H3,4,
 286            H6,2,
 287            H6,4,
 288            
 289            H5,4,
 290            M7,2,
 291            H1,4,
 292            H2,2,
 293            H2,2,
 294            H1,2,
 295            
 296            //第九行同节拍2
 297            H2,4+4,
 298            P0,2,
 299            M5,2,
 300            H4,2,
 301            H3,2,
 302            
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 6   

 303            H3,4,
 304            H4,2,
 305            H3,4,
 306            H2,2,
 307            H2,4,
 308            
 309            H1,4,
 310            H2,2,
 311            H3,4,
 312            H6,2,
 313            H6,4,
 314            
 315            H5,4,
 316            M7,2,
 317            H1,4,
 318            H2,2,
 319            H2,2,
 320            H1,2,
 321            
 322            //第十行同节拍1
 323            H3,4+4,
 324            P0,2,
 325            M5,2,
 326            H4,2,
 327            H3,2,
 328            
 329            H3,4,
 330            H4,2,
 331            H3,4,
 332            H2,2,
 333            H2,4,
 334            
 335            H1,4,
 336            H2,2,
 337            H3,4,
 338            H6,2,
 339            H6,4,
 340            
 341            H5,4,
 342            M7,2,
 343            H1,4,
 344            H2,2,
 345            H2,2,
 346            H1,2,
 347            
 348            //第十行同节拍2
 349            H3,4+4,
 350            P0,2,
 351            M5,2,
 352            H4,2,
 353            H3,2,
 354            
 355            H3,4,
 356            H4,2,
 357            H3,4,
 358            H2,2,
 359            H2,4,
 360            
 361            H1,4,
 362            H2,2,
 363            H3,4,
 364            H6,2,
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 7   

 365            H6,4,
 366            
 367            H5,4,
 368            M7,2,
 369            H1,4,
 370            H2,2,
 371            H2,2,
 372            H1,2,
 373            //第十行同节拍3
 374            H3,4+4,
 375            P0,2,
 376            M5,2,
 377            H4,2,
 378            H3,2,
 379            
 380            H3,4,
 381            H4,2,
 382            H3,4,
 383            H2,2,
 384            H2,4,
 385            
 386            H1,4,
 387            H2,2,
 388            H3,4,
 389            H6,2,
 390            H6,4,
 391            
 392            H5,4,
 393            M7,2,
 394            H1,4,
 395            H2,2,
 396            H2,2,
 397            H1,2,
 398            
 399            //第十一行
 400            H1,4+4+4,
 401            H1,2,
 402            H2,2,
 403            
 404            H3,4,
 405            H5,4,
 406            H2,4+4,
 407            
 408            H1,4,
 409            H5,4,
 410            M7,4+2,
 411            M7,1,
 412            M7,1,
 413            
 414            M6,4,
 415            M7,4,
 416            H1,4+2,
 417            H2,2,
 418            
 419            H3,4+4,
 420            P0,2,
 421            M5,2,
 422            H1,2,
 423            H2,2,
 424            //结
 425            0xFF
 426            
C51 COMPILER V9.60.0.0   MAIN                                                              10/31/2021 10:25:30 PAGE 8   

 427          };
 428          
 429          //定义
 430          unsigned char FreqSelect,MusicSelect;
 431          
 432          //主函数
 433          void main()
 434          {
 435   1        Timer0Init();
 436   1        while(1)
 437   1        {
 438   2          if(Music[MusicSelect]!=0xFF)
 439   2          {
 440   3          FreqSelect=Music[MusicSelect];
 441   3          MusicSelect++;
 442   3          Delay(SPEED/4*Music[MusicSelect]);
 443   3          MusicSelect++;
 444   3          TR0=0;
 445   3          Delay(5);
 446   3          TR0=1;
 447   3          }
 448   2          else
 449   2          {
 450   3            TR0=0;
 451   3            while(1);
 452   3          }
 453   2        }
 454   1      }
 455          
 456          void Timer0_Routine() interrupt 1
 457          {
 458   1        if(FreqTable[FreqSelect])
 459   1        {
 460   2            TL0 = FreqTable[FreqSelect]%256;
 461   2            TH0 = FreqTable[FreqSelect]/256;
 462   2            Buzzer=!Buzzer;
 463   2        
 464   2        }
 465   1      
 466   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    101    ----
   CONSTANT SIZE    =    605    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     74    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
