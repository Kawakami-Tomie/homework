C51 COMPILER V9.00   MAIN                                                                  10/02/2019 14:28:06 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include<REG52.H>
   2          /*16M-24M*/
   3          #include<intrins.h>
   4          #define WSCOUNT 10
   5          sbit k=P1^0;
   6          unsigned char WS2812_BUffer[WSCOUNT][3];
   7          void WS2812_write_date()
   8          { 
   9   1          bit w0,w1,w2,w3,w4,w5,w6,w7;
  10   1          unsigned char i,j,shu;
  11   1          for(i=0;i<WSCOUNT;i++)
  12   1          for(j=0;j<3;j++)
  13   1          {
  14   2              switch(j)
  15   2              {
  16   3                case 0:shu=WS2812_BUffer[i][1];break;
  17   3                case 1:shu=WS2812_BUffer[i][0];break;
  18   3                case 2:shu=WS2812_BUffer[i][2];break;
  19   3                
  20   3              }
  21   2              //shu=WS2812_BUffer[i][j];
  22   2              w7=shu&0x80;w6=shu&0x40;
  23   2              w5=shu&0x20;w4=shu&0x10;
  24   2              w3=shu&0x08;w2=shu&0x04;
  25   2              w1=shu&0x02;w0=shu&0x01;
  26   2            
  27   2              k=0;
  28   2              if(w7) k=1;
  29   2              else k=0;
  30   2              k=1;
  31   2              _nop_();
  32   2              
  33   2              k=0;
  34   2              if(w6) k=1;
  35   2              else k=0;
  36   2              k=1; 
  37   2              _nop_();
  38   2              
  39   2              k=0;
  40   2              if(w5) k=1;
  41   2              else k=0;
  42   2              k=1; 
  43   2              _nop_();
  44   2              
  45   2              k=0;
  46   2              if(w4) k=1;
  47   2              else k=0;
  48   2              k=1;
  49   2              _nop_();
  50   2      
  51   2              k=0;
  52   2              if(w3) k=1;
  53   2              else k=0;
  54   2              k=1; 
  55   2              _nop_();
C51 COMPILER V9.00   MAIN                                                                  10/02/2019 14:28:06 PAGE 2   

  56   2              
  57   2              k=0;
  58   2              if(w2) k=1;
  59   2              else k=0;
  60   2              k=1; 
  61   2              _nop_();
  62   2              
  63   2              k=0;
  64   2              if(w1) k=1;
  65   2              else k=0;
  66   2              k=1; 
  67   2              _nop_();
  68   2              
  69   2              k=0;
  70   2              if(w0) 
  71   2              k=1;
  72   2              else k=0;
  73   2              k=1; 
  74   2              _nop_();
  75   2              k=0;
  76   2          }
  77   1      }
  78          void WS2812_Ser()
  79          {
  80   1          static unsigned char count=0;
  81   1          count++;
  82   1          switch(count)
  83   1          {
  84   2            case 1:k=0;break;
  85   2            case 50:EA=0;WS2812_write_date();EA=1;break;
  86   2            case 51:k=0;break;
  87   2          }
  88   1          count%=60;
  89   1      }
  90          void WS2812_Allot()
  91          {
  92   1          unsigned char i,j;
  93   1          static unsigned char count=0;
  94   1          count++;
  95   1          if(count==60)
  96   1          {
  97   2              for(j=0;j<WSCOUNT;j++)
  98   2              {
  99   3                  for(i=0;i<3;i++)
 100   3                  {
 101   4                      if(i==1)
 102   4                        WS2812_BUffer[j][i]=40;
 103   4                      else 
 104   4                        WS2812_BUffer[j][i]=0;
 105   4                  }
 106   3              }
 107   2          }
 108   1          WS2812_Ser();
 109   1      }
 110          void main()
 111          {
 112   1          while(1)
 113   1          {
 114   2              WS2812_Allot();
 115   2          }
 116   1      }

C51 COMPILER V9.00   MAIN                                                                  10/02/2019 14:28:06 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    294    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       8
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
