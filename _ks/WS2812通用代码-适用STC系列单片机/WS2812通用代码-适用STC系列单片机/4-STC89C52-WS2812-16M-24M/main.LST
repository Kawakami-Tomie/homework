C51 COMPILER V9.00   MAIN                                                                  10/02/2019 14:03:57 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include<REG52.H>
   2          #include<intrins.h>
   3          #define WSCOUNT 10
   4          sbit k=P1^0;
   5          unsigned char WS2812_BUffer[WSCOUNT][3];
   6          void WS2812_write_date()
   7          { 
   8   1          bit w0,w1,w2,w3,w4,w5,w6,w7;
   9   1          unsigned char i,j,shu;
  10   1          for(i=0;i<WSCOUNT;i++)
  11   1          for(j=0;j<3;j++)
  12   1          {
  13   2              switch(j)
  14   2              {
  15   3                case 0:shu=WS2812_BUffer[i][1];break;
  16   3                case 1:shu=WS2812_BUffer[i][0];break;
  17   3                case 2:shu=WS2812_BUffer[i][2];break;
  18   3                
  19   3              }
  20   2              //shu=WS2812_BUffer[i][j];
  21   2              w7=shu&0x80;w6=shu&0x40;
  22   2              w5=shu&0x20;w4=shu&0x10;
  23   2              w3=shu&0x08;w2=shu&0x04;
  24   2              w1=shu&0x02;w0=shu&0x01;
  25   2            
  26   2              k=0;
  27   2              if(w7) k=1;
  28   2              else k=0;
  29   2              k=1; k=0;
  30   2              if(w6) k=1;
  31   2              else k=0;
  32   2              k=1; k=0;
  33   2              if(w5) k=1;
  34   2              else k=0;
  35   2              k=1; k=0;
  36   2              if(w4) k=1;
  37   2              else k=0;
  38   2              k=1; k=0;
  39   2              if(w3) k=1;
  40   2              else k=0;
  41   2              k=1; k=0;
  42   2              if(w2) k=1;
  43   2              else k=0;
  44   2              k=1; k=0;
  45   2              if(w1) k=1;
  46   2              else k=0;
  47   2              k=1; k=0;
  48   2              if(w0) k=1;
  49   2              else k=0;
  50   2              k=1; k=0;
  51   2          }
  52   1      }
  53          void WS2812_Ser()
  54          {
  55   1          static unsigned char count=0;
C51 COMPILER V9.00   MAIN                                                                  10/02/2019 14:03:57 PAGE 2   

  56   1          count++;
  57   1          switch(count)
  58   1          {
  59   2            case 1:k=0;break;
  60   2            case 50:EA=0;WS2812_write_date();EA=1;break;
  61   2            case 51:k=0;break;
  62   2          }
  63   1          count%=60;
  64   1      }
  65          void WS2812_Allot()
  66          {
  67   1          unsigned char i,j;
  68   1          static unsigned char count=0;
  69   1          count++;
  70   1          if(count==60)
  71   1          {
  72   2              for(j=0;j<WSCOUNT;j++)
  73   2              {
  74   3                  for(i=0;i<3;i++)
  75   3                  {
  76   4                      if(i==1)
  77   4                        WS2812_BUffer[j][i]=40;
  78   4                      else 
  79   4                        WS2812_BUffer[j][i]=0;
  80   4                  }
  81   3              }
  82   2          }
  83   1          WS2812_Ser();
  84   1      }
  85          void main()
  86          {
  87   1          while(1)
  88   1          {
  89   2              WS2812_Allot();
  90   2          }
  91   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    286    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       8
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
