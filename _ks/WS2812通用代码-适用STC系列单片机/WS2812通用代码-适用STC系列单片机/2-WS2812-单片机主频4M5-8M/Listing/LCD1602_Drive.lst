C51 COMPILER V9.00   LCD1602_DRIVE                                                         07/28/2019 08:33:00 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LCD1602_DRIVE
OBJECT MODULE PLACED IN ..\Objects\LCD1602_Drive.obj
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE ..\C_AND_H\LCD1602_Drive.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\C_AND_H) D
                    -EBUG OBJECTEXTEND PRINT(..\Listing\LCD1602_Drive.lst) TABS(2) OBJECT(..\Objects\LCD1602_Drive.obj)

line level    source

   1          #include<all.h>
   2          u8 code LCD1602_xx[8]={8,0,7,8,8,8,8,7};//
   3          /*0
   4          *---
   5          ----
   6          -***
   7          *---
   8          *---
   9          *---
  10          *---
  11          -***
  12          */
  13          u8 code ziding[8]={31,17,17,17,17,17,17,31};
  14          /*1
  15          *****
  16          *---*
  17          *---*
  18          *---*
  19          *---*
  20          *---*
  21          *---*
  22          *****
  23          */
  24          u8 code shi[8]={21,31,21,31,21,31,21,31};
  25          /*2
  26          *-*-*
  27          *****
  28          *-*-*
  29          *****
  30          *-*-*
  31          *****
  32          *-*-*
  33          *****
  34          */
  35          u8 code shi2[8]={1,2,3,4,5,6,7,8};
  36          u8 xdata LCD1602_Write_Buffer[2][16];//LCD1602 上行数据
  37          u8 xdata LCD1602_Write_Cursor_Add=0;//光标位置
  38          /*短暂延时函数*/ 
  39          void LCD1602_Delay(u8 z)
  40          {
  41   1        u8 i; 
  42   1        while(z--)
  43   1        { 
  44   2          i=19;
  45   2          while(i--);
  46   2        }
  47   1      }
  48          /*写入1602数据RAM*/
  49          void LCD1602_Write_Data(u8 Dat)//1602写入数据
  50          {
  51   1            LCD1602_RS=1;              //高电平数据
  52   1            LCD1602_E=0;
  53   1            LCD1602_Delay(3);          
  54   1            LCD1602_E=1;         //使能拉高
C51 COMPILER V9.00   LCD1602_DRIVE                                                         07/28/2019 08:33:00 PAGE 2   

  55   1            DATA=Dat;
  56   1            LCD1602_E=0;         //下降沿触发1602接收
  57   1      }
  58          /*写入1602寄存器*/ 
  59          void LCD1602_Write_Reg(u8 Dat) //1602写入指令
  60          {
  61   1            LCD1602_RS=0;        //高电平命令
  62   1            LCD1602_E=0;
  63   1            LCD1602_Delay(3);
  64   1            LCD1602_E=1;         //使能拉高
  65   1            DATA=Dat;
  66   1            LCD1602_E=0;         //下降沿触发1602接收
  67   1      }
  68          /*初始化1602寄存器*/
  69          void LCD1602_Init()
  70          {   
  71   1          u8 i;
  72   1          LCD1602_Write_Reg(0x01);  //清除显示
  73   1          LCD1602_Delay(25);
  74   1          LCD1602_Write_Reg(0x02);  //光标复位
  75   1          LCD1602_Delay(25);
  76   1          LCD1602_Write_Reg(0x06);  //光标移动方向
  77   1          LCD1602_Delay(25);
  78   1          LCD1602_Write_Reg(0x0c);  //整体显示开，无光标
  79   1          LCD1602_Delay(25);
  80   1          LCD1602_Write_Reg(0x14);  //光标随着字右移
  81   1          LCD1602_Delay(25);
  82   1          LCD1602_Write_Reg(0x38);  //八位总线，双行显示
  83   1          LCD1602_Delay(25);
  84   1          LCD1602_Write_Reg(0x40);  //自定义CGRAM区，保存自定义符号
  85   1        
  86   1        for(i=0;i<8;i++)//0
  87   1        {
  88   2          LCD1602_Write_Reg(0x40+i);
  89   2          LCD1602_Write_Data(LCD1602_xx[i]);    
  90   2        }
  91   1         for(i=0;i<8;i++)//1
  92   1        {
  93   2          LCD1602_Write_Reg(0x48+i);
  94   2          LCD1602_Write_Data(ziding[i]);    
  95   2        }
  96   1        for(i=0;i<8;i++)//2
  97   1        {
  98   2          LCD1602_Write_Reg(0x50+i);
  99   2          LCD1602_Write_Data(shi[i]);   
 100   2        }
 101   1        for(i=0;i<8;i++)//3
 102   1        {
 103   2            LCD1602_Write_Reg(0x58+i);
 104   2            LCD1602_Write_Data(shi2[i]);    
 105   2        }   
 106   1      }
 107          /*显示内容发送到1602数据RAM*/
 108          void LCD1602_Display_Ser(bit k)               //1602显示刷新
 109          {
 110   1        u8 i;
 111   1        for(i=0;i<=16;i++)                   //上行显示，从最左边开始
 112   1        {
 113   2          if(k)
 114   2          LCD1602_Write_Reg(0xC0+i);
 115   2          else
 116   2          LCD1602_Write_Reg(0x80+i);
C51 COMPILER V9.00   LCD1602_DRIVE                                                         07/28/2019 08:33:00 PAGE 3   

 117   2          LCD1602_Write_Data(LCD1602_Write_Buffer[k][i]); 
 118   2        }
 119   1        switch(LCD1602_Write_Cursor_Add)        //光标控制
 120   1        {
 121   2          case 0:LCD1602_Write_Reg(0x0c);break;
 122   2          case 1:LCD1602_Write_Reg(0x0f);LCD1602_Write_Reg(0x80);break;
 123   2          case 2:LCD1602_Write_Reg(0x0f);LCD1602_Write_Reg(0xc0);break;
 124   2        }
 125   1        
 126   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    279    ----
   CONSTANT SIZE    =     32    ----
   XDATA SIZE       =     33    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
